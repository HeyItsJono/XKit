{"id":"audio_plus","script":"//* TITLE Audio+ **//\n//* VERSION 0.3.1 **//\n//* DESCRIPTION Enhancements for the Audio Player **//\n//* DEVELOPER STUDIOXENIX **//\n//* FRAME false **//\n//* BETA false **//\n\nXKit.extensions.audio_plus = {\n\n\trunning: false,\n\n\tcheck_current_interval: 0,\n\n\trun: function() {\n\t\tthis.running = true;\n\n\t\tif (XKit.interface.where().inbox === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ($(\"#posts\").length > 0) {\n\t\t\tXKit.tools.init_css(\"audio_plus\");\n\t\t\t$(document).on(\"mousemove mousedown mouseup mouseout click\", \".xkit-audio-plus-slider\", XKit.extensions.audio_plus.slider_handle_event);\n\t\t\tXKit.post_listener.add(\"audio_plus\", XKit.extensions.audio_plus.do);\n\t\t\tsetTimeout(function() { XKit.extensions.audio_plus.do(); }, 500);\n\t\t\t$(\"body\").append(\"<div id=\\\"xkit-audio-plus-current-player\\\"></div>\");\n\t\t\tXKit.extensions.audio_plus.check_current_interval = setInterval(function() { XKit.extensions.audio_plus.check_current(); }, 1000);\n\t\t}\n\n\t},\n\n\tcheck_current: function() {\n\n\t\tXKit.tools.add_function(function() {\n\n\t\t\ttry {\n\t\t\t\tvar current_player = Tumblr.AudioPlayer.current_player_id;\n\n\t\t\t\tvar m_object = {\n\t\t\t\t\tdefined: false\n\t\t\t\t};\n\n\t\t\t\tif (typeof current_player !== \"undefined\") {\n\t\t\t\t\tm_object.defined = true;\n\t\t\t\t\tm_object.title = audiojs.instances[\"audiojs\" + current_player].audioplayer.$track_name.text();\n\t\t\t\t\tm_object.artist = audiojs.instances[\"audiojs\" + current_player].audioplayer.$artist_name.text();\n\t\t\t\t\tm_object.playing = audiojs.instances[\"audiojs\" + current_player].playing;\n\t\t\t\t\tm_object.id = parseInt(current_player);\n\t\t\t\t\tjQuery(\"#xkit-audio-plus-current-player\").html(\"CU:\" + JSON.stringify(m_object));\n\t\t\t\t} else {\n\t\t\t\t\tjQuery(\"#xkit-audio-plus-current-player\").html(\"\");\n\t\t\t\t}\n\t\t\t} catch(e){\n\t\t\t\tjQuery(\"#xkit-audio-plus-current-player\").html(\"\");\n\t\t\t}\n\n\t\t}, true, \"\");\n\t},\n\n\treturn_current_instance: function() {\n\n\t\tif ($(\"#xkit-audio-plus-current-player\").html().substring(0,3) !== \"CU:\") {\n\t\t\treturn -1;\n\t\t} else {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse($(\"#xkit-audio-plus-current-player\").html().substring(3));\n\t\t\t} catch(e) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\n\t},\n\n\tstop_current_instance: function() {\n\t\tvar instance = XKit.extensions.audio_plus.return_current_instance();\n\n\t\tif (instance === -1) { return; }\n\n\t\tvar m_object = {\n\t\t\tid: instance.id\n\t\t};\n\n\t\tXKit.tools.add_function(function() {\n\t\t\tvar add_tags = JSON.parse(add_tag);\n\t\t\tvar m_object = audiojs.instances[\"audiojs\" + add_tags.id];\n\t\t\tm_object.pause();\n\t\t}, true, JSON.stringify(m_object));\n\n\t},\n\n\tplay_current_instance: function() {\n\t\tvar instance = XKit.extensions.audio_plus.return_current_instance();\n\n\t\tif (instance === -1) { return; }\n\n\t\tvar m_object = {id: instance.id};\n\n\t\tXKit.tools.add_function(function() {\n\n\t\t\tvar add_tags = JSON.parse(add_tag);\n\t\t\tvar m_object = audiojs.instances[\"audiojs\" + add_tags.id];\n\t\t\tm_object.play();\n\n\t\t}, true, JSON.stringify(m_object));\n\n\t},\n\n\tslider_handle_event: function(e) {\n\t\tfunction firstParentWithClass(elt, cls) {\n\t\t\tif (elt.classList.contains(cls)) {\n\t\t\t\treturn elt;\n\t\t\t} else {\n\t\t\t\treturn firstParentWithClass(elt.parentNode, cls);\n\t\t\t}\n\t\t}\n\t\tvar slider =\te.target;\n\n\t\tvar parent_post = firstParentWithClass(slider, 'post');\n\t\tvar volume = slider.value;\n\t\tif (e.type === \"click\" || e.type === \"mousemove\") {\n\t\t\tslider.title = volume;\n\t\t\tvar audio = parent_post.querySelector(\"audio\");\n\t\t\tif (audio && audio.volume !== volume / 100) {\n\t\t\t\taudio.volume = volume / 100;\n\t\t\t}\n\t\t}\n\t},\n\n\tdo: function() {\n\n\t\tvar posts = XKit.interface.get_posts(\"audio_plus_done\");\n\n\t\t$(posts).each(function() {\n\n\t\t\t$(this).addClass(\"audio_plus_done\");\n\n\t\t\tvar m_post = XKit.interface.post($(this));\n\n\t\t\tif (!m_post || m_post.type !== \"audio\") { return; }\n\n\t\t\t// Check if hosted by Tumblr:\n\t\t\tif ($(this).find(\".audio_player\").length === 0 || $(this).find(\".audio_visualizer\").length === 0) { return; }\n\n\t\t\tvar slider_html =\t \"<div data-post-id=\\\"\" + m_post.id + \"\\\" class=\\\"xkit-audio-plus-slider-container\\\">\" +\n\t\t\t\t\t\t\t\t\"<input type=\\\"range\\\" value=\\\"100\\\" min=\\\"0\\\" max=\\\"100\\\" data-post-id=\\\"\" + m_post.id + \"\\\" title=\\\"somepeoplelikefish\\\" class=\\\"xkit-audio-plus-slider\\\"></input>\" +\n\t\t\t\t\t\t\"</div>\";\n\n\t\t\t$(this).find(\".post_media\").append(slider_html);\n\n\t\t\t// console.log(\"Volume is => \" + $(this).find(\"audio\").get(0).volume);\n\n\t\t});\n\n\t},\n\n\tdestroy: function() {\n\t\tthis.running = false;\n\t\tclearInterval(XKit.extensions.audio_plus.check_current_interval);\n\t\t$(\"#xkit-audio-plus-current-player\").remove();\n\t\tXKit.post_listener.remove(\"audio_plus\");\n\t}\n\n};\n","file":"found","server":"up","errors":false,"icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGNzdGMTE3NDA3MjA2ODExOEE2REFBMEI0RDEyNThDRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFQzlCMDFFQjE3MjcxMUUzQTZGQUIyOEJBN0ZCMTA5MCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFQzlCMDFFQTE3MjcxMUUzQTZGQUIyOEJBN0ZCMTA5MCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkY3N0YxMTc0MDcyMDY4MTE4QTZEQUEwQjREMTI1OENFIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkY3N0YxMTc0MDcyMDY4MTE4QTZEQUEwQjREMTI1OENFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+yCpfcAAABAxJREFUeNqMlj1sHEUUx3fGo7vb832sz2cb8SERm0SgGINEmSriIw0NaRASogkF0EW0SCnowoeQaFKlitJQp+HLAiEhUWAciQZhhAQykiPbyV3uztndmcd7Ox87u7d38mg1t3s3+5v//N+bN8c2twFYgA1UANhDwBj1rulfzb33vX6l0Lj5VN73At/X46CKclo6z29zOiOocPTS+yV6+afT0XGY8LXPQReWpYqGyAznN6Yl02sc5tqSv1CkuzGGDp5M+wgKQEoRVJlT1g6GRfFn1DNfOFiue7R0HCTmaC9NrOn6e+MSTIXB0lVCdJogOF1TkBs1M8LS0ANp6CBTcZqMpDd5oEbj8W/b493vT3a3472djW+hPGaKnq9gVkbiyNHPdxA6ubsd/7lTPcbaRXR80HR/BbOsJ1FB8N+110tE3orUw/vFSSw9U010maokpQnm0F1UdWu8cHHxwuXwxYv19fN7r7BcvrkUpCjZ0PGCrBdztDv645/9FD5/oXrTZnSVGkMMHVIA0/NZdJ9Vouf1wKMbZzTXrgBkLKajalJ+djq6lCeaMnSVCXcB0HRjUXkn86nq5GmP//pdjSjCkBTpgU1NTVdJFomksJNNYCtrfUa/9+mVh1/ftNvN0iGj26hCmgAkIHGCZGNhyMt0e/hg+v/9zvrea8z33dFZq0t6g4xuPcFoIJfoKcnnMnkzOhaFwHraDz552yW7i2rnjauP9nZ42I3e+ghItTR0RVd2Y+jYv9w8eqZbE6Va5pwRj53RW3f5/S/NxDLoXfkcgHaTpluoS5vYuXRODC+vxlG0IrTk0p7C9tSNXwsZCeQz0TNnNB0SdL9IT2kFy2zy3tqgF/WWlpa4fzzlgeVVGanpeGe0o60mbQJ0RtNl0mUnH6wcrUXtXq/XbDaF22UufyqqGOW7pmvtEss9s9qRrsj3BGdND/75cJOvL7f6/X673RZCcBLLie7HeWo3ObopBpaeGHoWhuTfPw6/eHej315dXY2iCOkU2rPfgRE7dTzRlFQJXAU2dBRK05L22NCTZPLLncFX1+Fk5LTt7+9TsuRWsMLhXqaDnKbr3JeD4/u3rsV3f6g8LYTvRsAKdHCnh9SxLdMxpJPdHwe3P1YPDmadtWzjGyj9McGZVOY7pJYuDVemKdPFUsVPBw8uhUcvRdDpdNDxra0t35mqFRTpuXZbJpUuBird4vcutQ7Ptdji4iLSsQ/DcNYKREF+9n8EQB9+lk5Vnm4iNTovDl9tHj/Z5EjGLMQ0bzQamC2MsdkTFOm0I6RJR7w6anyGHW7yo+ea45Ua1Ov1MFxCyYiu1Wo+uuTMlEUZvaEedZPhihy2YfIEDJ+tD9ZEUs9ao9HHvpY15C4sLMxR7bf/BRgARH0De0s6yW0AAAAASUVORK5CYII=","css":".xkit-audio-plus-slider-container {\n\tposition: absolute;\n\tbottom: 7px;\n\tleft: 8px;\n\tbackground: rgba(0,0,0,0.33) no-repeat 10px 50% url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAALCAYAAACZIGYHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RUM5QjAxRTYxNzI3MTFFM0E2RkFCMjhCQTdGQjEwOTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RUM5QjAxRTcxNzI3MTFFM0E2RkFCMjhCQTdGQjEwOTAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFQzlCMDFFNDE3MjcxMUUzQTZGQUIyOEJBN0ZCMTA5MCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFQzlCMDFFNTE3MjcxMUUzQTZGQUIyOEJBN0ZCMTA5MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PihVDREAAAB0SURBVHjaYmSgDHABsS4jBQaoArE2EP8nxxA+IDYGYmEo/zcLCZqZgFgDipmQJYg1RBhqOx82SUKGsED9rUpIES4gCcSG0BhgINUQdiDWB2I5YgML3RB5qAFspEQXzBBuqNMlyEkwIEPUgFiLhJjCAAABBgCzWgWZRwU92AAAAABJRU5ErkJggg==);\n\twidth: 145px;\n\theight: 23px;\n\tborder-radius: 6px;\n\tpadding-left: 35px;\n\tpadding-right: 5px;\n\tz-index: 89;\n\topacity: 0.65;\n}\n\n.post_full .post_media { position: relative; }\n\n.xkit-audio-plus-slider-container:hover {\n\topacity: 1;\n}\n\n.xkit-audio-plus-slider-container * {\n\t-moz-user-select: none;\n\t-webkit-user-select: none;\n\tuser-select: none;\n}\n\n.xkit-audio-plus-slider {\n\twidth: 100px;\n\tposition: absolute;\n\ttop: 50%; height: 6px;\n\tmargin-top: -3px;\n\tbackground: rgba(0,0,0,0.33);\n\tborder-radius: 6px;\n}\n","title":"Audio+","description":"Enhancements for the Audio Player","developer":"STUDIOXENIX","version":"0.3.1","frame":"false","beta":"false","slow":"false"}